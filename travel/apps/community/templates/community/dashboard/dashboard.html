{% extends "base.html" %}
{% load cms_tags i18n menu_tags sekizai_tags staticfiles%}
{%load destinations_tags%}
{% block title %}{% trans 'Comunity' %}{% endblock title %}
{% block navbar %}
{% include 'menu/navbar_all.html' %}
{% endblock navbar %}

{% block content %}
<br><br><br><br>
<main id="content" role="main">
    {% include 'community/dashboard/breadcrumb.html'%}

    <!-- Content Section -->
    <div class="bg-light">
        <div class="container space-2">
            <div class="row justify-content-between align-items-center mb-4">
                <!-- Title -->
                <div class="col-sm-4 col-md-6 mb-3 mb-sm-0">
                    
                    <h2 class="h6 mb-0">{{members.count }} {% trans "members found" %}</h2>
                </div>
                <!-- End Title -->

                <!-- Filter -->
                <div class="col-sm-8 col-md-6 text-sm-right">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item">
                            <!-- Select -->
                            <div class="dropdown bootstrap-select js-select dropdown-select fit-width dropup"><select
                                    class="js-select selectpicker dropdown-select" data-width="fit"
                                    data-style="btn-soft-primary btn-sm" tabindex="-98">
                                    <option value="alphabeticalOrderSelect1" selected="">A-to-Z</option>
                                    <option value="alphabeticalOrderSelect2">Z-to-A</option>
                                </select>
                                <div class="dropdown-menu" role="combobox" x-placement="bottom-start"
                                    style="max-height: 336px; overflow: hidden; min-height: 0px; position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 43px, 0px);">
                                    <div class="inner show" role="listbox" aria-expanded="false" tabindex="-1"
                                        style="max-height: 304px; overflow-y: auto; min-height: 0px;">
                                        <ul class="dropdown-menu inner show">
                                            <li class="selected active"><a role="option"
                                                    class="dropdown-item selected active" aria-disabled="false"
                                                    tabindex="0" aria-selected="true"><span
                                                        class=" bs-ok-default check-mark"></span><span
                                                        class="text">A-to-Z</span></a></li>
                                            <li><a role="option" class="dropdown-item" aria-disabled="false"
                                                    tabindex="0" aria-selected="false"><span
                                                        class=" bs-ok-default check-mark"></span><span
                                                        class="text">Z-to-A</span></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <!-- End Select -->
                        </li>
                        <li class="list-inline-item">
                            <a class="btn btn-sm btn-soft-primary active" href="members.html">
                                <span class="fas fa-th-large"></span>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a class="btn btn-sm btn-soft-primary" href="members-list.html">
                                <span class="fas fa-list"></span>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- End Filter -->
            </div>

            <div class="card-deck d-block d-md-flex">
                <!-- Members -->
                {% for user in members %}
                {% if user != request.user %}
                <div class="card text-center mb-5">
                    <a href="{% url 'profile_detail' user.id %}">
                    <div class="card-body p-6">
                        <!-- Team -->
                        <div class="mb-4">
                            <div class="position-relative u-lg-avatar mx-auto mb-3">
                                {% if user.avatar %}
                                <img src="/main/media/{{ user.avatar }}" class="rounded-circle" height="125" />
                                {% else %}
                                <img src="{% static 'img/user.png'%}" width="80" class="img-responsive" alt="Actualize su foto de Perfil" />
                                {% endif %}
                                <span
                                    class="badge badge-xs badge-outline-primary badge-pos badge-pos--bottom-left rounded-circle"></span>
                            </div>

                            <a class="btn btn-sm btn-icon btn-soft-warning btn-bg-transparent position-absolute top-0 right-0 rounded-circle m-3"
                                href="javascript:;" data-toggle="tooltip" data-placement="top" title=""
                                data-original-title="Add to favorites">
                                <span class="far fa-star btn-icon__inner"></span>
                            </a>

                            <h2 class="h6 mb-0">
                                <a href="#">{{ user.get_full_name }}</a>
                            </h2>
                            <a class="small" href="#">{{ user.email }}</a>
                        </div>
                        
                        <!-- End Team -->

                        <!-- Social Networks -->
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item">
                                <a class="btn btn-sm btn-icon btn-soft-secondary rounded-circle" href="{{ user.facebook }}">
                                    <span class="fab fa-facebook-f btn-icon__inner"></span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a class="btn btn-sm btn-icon btn-soft-secondary rounded-circle" href="mailto://{{ user.email }}">
                                    <span class="fab fa-google btn-icon__inner"></span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a class="btn btn-sm btn-icon btn-soft-secondary rounded-circle" href="{{ user.twitter }}">
                                    <span class="fab fa-twitter btn-icon__inner"></span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a class="btn btn-sm btn-icon btn-soft-secondary rounded-circle" href="{{ user.instagram }}">
                                    <span class="fab fa-instagram btn-icon__inner"></span>
                                </a>
                            </li>
                        </ul>
                        <!-- End Social Networks -->
                    </div>
                    </a>
                    {% with total_followers=user.followers.count %}
                    <span class="count">
                        <span class="total">{{ total_followers }}</span>
                        follower{{ total_followers|pluralize }}
                    </span>
                    <div class="card-footer py-4 px-6">
                        <form action="{% url 'user_follow' %}" method="POST">{% csrf_token %}
                            <input type="hidden" value="{{ user.id }}" name="id_user">
                            {% if request.user not in user.followers.all %}
                                <input type="hidden" value="follow" name="follow">
                            {% else %}
                                <input type="hidden" value="unfollow" name="unfollow">
                            {% endif %}
                            <button class="follow btn btn-sm btn-soft-primary transition-3d-hover">
                                <span class="fa fa-plus mr-2"></span>
                                {% if request.user not in user.followers.all %}
                                    Follow
                                {% else %}
                                    Unfollow
                                {% endif %}
                            </button>
                        </form>
                    </div>
                    {% endwith %}
                </div>
                {% endif %}
                {% endfor %}
                <!-- End Members -->
            </div>
        </div>
    </div>
    <!-- End Content Section -->
</main>



{% endblock%}
{% block extrajs %}

{% endblock extrajs%}